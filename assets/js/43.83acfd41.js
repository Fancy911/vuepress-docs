(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{471:function(t,s,a){t.exports=a.p+"assets/img/github项目.d59f9dea.png"},631:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"需求概览"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#需求概览"}},[t._v("#")]),t._v(" 需求概览")]),t._v(" "),s("p",[t._v("实现一个如下图所示的搜索页面，输入关键字后，点击搜索按钮，可以显示所有相关用户。")]),t._v(" "),s("img",{attrs:{src:a(471),width:"80%"}}),t._v(" "),s("h2",{attrs:{id:"消息订阅与发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#消息订阅与发布"}},[t._v("#")]),t._v(" 消息订阅与发布")]),t._v(" "),s("p",[t._v("什么是消息订阅与发布？")]),t._v(" "),s("ul",[s("li",[t._v("消息订阅：订阅者订阅消息")]),t._v(" "),s("li",[t._v("消息发布：发布者发布消息")]),t._v(" "),s("li",[t._v("消息订阅与发布：订阅者订阅消息，发布者发布消息，订阅者收到消息")])]),t._v(" "),s("p",[t._v("在我们的项目中，就是List（下面展示用户列表区）订阅消息，Search（搜索区）发布消息。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/mroderick/PubSubJS",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件："),s("code",[t._v("pubsub-js")]),s("OutboundLink")],1)]),t._v(" "),s("ol",[s("li",[t._v("工具库: "),s("code",[t._v("PubSubJS")])]),t._v(" "),s("li",[t._v("下载: "),s("code",[t._v("npm install pubsub-js --save")])]),t._v(" "),s("li",[t._v("使用:\n"),s("ul",[s("li",[s("code",[t._v("import PubSub from 'pubsub-js' //引入")])]),t._v(" "),s("li",[s("code",[t._v("PubSub.subscribe('msg', function(data){ }); //订阅")])]),t._v(" "),s("li",[s("code",[t._v("PubSub.publish('msg', data) //发布消息")])])])])]),t._v(" "),s("h2",{attrs:{id:"知识补充-fetch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#知识补充-fetch"}},[t._v("#")]),t._v(" 知识补充-"),s("code",[t._v("Fetch")])]),t._v(" "),s("p",[s("code",[t._v("Fetch")]),t._v("被称为下一代"),s("code",[t._v("Ajax")]),t._v("技术，·采用"),s("code",[t._v("Promise")]),t._v("方式来处理数据。")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.github.io/fetch/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Github官方文档"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000003810652",target:"_blank",rel:"noopener noreferrer"}},[t._v("思否博客介绍"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"fetch的优势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetch的优势"}},[t._v("#")]),t._v(" "),s("code",[t._v("Fetch")]),t._v("的优势")]),t._v(" "),s("p",[t._v("页面中需要向服务器请求数据时，基本上都会使用"),s("code",[t._v("Ajax")]),t._v("来实现。")]),t._v(" "),s("p",[s("code",[t._v("Ajax")]),t._v("的本质是使用"),s("code",[t._v("XMLHttpRequest")]),t._v("对象来请求数据，而"),s("code",[t._v("XMLHttpRequest")]),t._v("对象是通过事件的模式来实现返回数据的处理。")]),t._v(" "),s("p",[t._v("与"),s("code",[t._v("XMLHttpRequest")]),t._v("类似，"),s("code",[t._v("Fetch")]),t._v("允许你发出"),s("code",[t._v("AJAX")]),t._v("请求。区别在于"),s("code",[t._v("Fetch API")]),t._v("使用"),s("code",[t._v("Promise")]),t._v("方式，"),s("code",[t._v("Promise")]),t._v("是已经正式发布的"),s("code",[t._v("ES6")]),t._v("的内容之一，因此是一种简洁明了的"),s("code",[t._v("API")]),t._v("，比"),s("code",[t._v("XMLHttpRequest")]),t._v("更加简单易用。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[t._v("如果有人问你，不用"),s("code",[t._v("xhr")]),t._v("，还可以用什么方式发送"),s("code",[t._v("ajax")]),t._v("请求，你可以说：可以用"),s("code",[t._v("fetch")])]),t._v(" "),s("p",[s("code",[t._v("fetch")]),t._v("与"),s("code",[t._v("jquery")]),t._v("和"),s("code",[t._v("axios")]),t._v("的区别：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("fetch")]),t._v("是原生的，不需要引入任何库")]),t._v(" "),s("li",[t._v("而"),s("code",[t._v("jquery")]),t._v("和"),s("code",[t._v("axios")]),t._v("都是第三方库，需要引入")])]),t._v(" "),s("p",[t._v("可以简单理解，"),s("code",[t._v("fetch")]),t._v("是原生的，与"),s("code",[t._v("xhr")]),t._v("地位相当的，而"),s("code",[t._v("jquery")]),t._v("和"),s("code",[t._v("axios")]),t._v("是第三方库，是对"),s("code",[t._v("xhr")]),t._v("的封装")])]),s("h3",{attrs:{id:"fetch的基本使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetch的基本使用"}},[t._v("#")]),t._v(" "),s("code",[t._v("Fetch")]),t._v("的基本使用")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get请求")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// post请求")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("headers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Error:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h3",{attrs:{id:"fetch的缺陷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetch的缺陷"}},[t._v("#")]),t._v(" "),s("code",[t._v("Fetch")]),t._v("的缺陷")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("Fetch")]),t._v("默认不会携带"),s("code",[t._v("cookie")]),t._v("，需要设置"),s("code",[t._v("credentials: 'include'")])]),t._v(" "),s("li",[s("code",[t._v("Fetch")]),t._v("默认不会携带"),s("code",[t._v("Content-Type")]),t._v("，需要设置"),s("code",[t._v("headers: {'Content-Type': 'application/json'}")])]),t._v(" "),s("li",[s("code",[t._v("Fetch")]),t._v("默认不会携带"),s("code",[t._v("Accept")]),t._v("，需要设置"),s("code",[t._v("headers: {'Accept': 'application/json'}")])]),t._v(" "),s("li",[s("code",[t._v("Fetch")]),t._v("默认不会携带"),s("code",[t._v("X-Requested-With")]),t._v("，需要设置"),s("code",[t._v("headers: {'X-Requested-With': 'XMLHttpRequest'}")])]),t._v(" "),s("li",[s("code",[t._v("Fetch")]),t._v("默认不会携带"),s("code",[t._v("Authorization")]),t._v("，需要设置"),s("code",[t._v("headers: {'Authorization': 'Bearer ' + token}")])]),t._v(" "),s("li",[s("code",[t._v("Fetch")]),t._v("默认不会携带"),s("code",[t._v("X-CSRF-TOKEN")]),t._v("，需要设置"),s("code",[t._v("headers: {'X-CSRF-TOKEN': csrfToken}")])])]),t._v(" "),s("p",[s("code",[t._v("Fetch")]),t._v(" 还不是 "),s("code",[t._v("W3C")]),t._v(" 规范，因此原生支持率并不高。\n幸运的是，引入下面这些 "),s("code",[t._v("polyfill")]),t._v(" 后可以完美支持 "),s("code",[t._v("IE8+")]),t._v(" ：")]),t._v(" "),s("ol",[s("li",[t._v("由于 "),s("code",[t._v("IE8")]),t._v(" 是 "),s("code",[t._v("ES3")]),t._v("，需要引入 "),s("code",[t._v("ES5")]),t._v("的 "),s("code",[t._v("polyfill")]),t._v(": "),s("code",[t._v("es5-shim, es5-sham")])]),t._v(" "),s("li",[t._v("引入"),s("code",[t._v("Promise")]),t._v("的 "),s("code",[t._v("polyfill")]),t._v(": "),s("code",[t._v("es6-promise")])]),t._v(" "),s("li",[t._v("引入"),s("code",[t._v("fetch")]),t._v("探测库："),s("code",[t._v("fetch-detector")])]),t._v(" "),s("li",[t._v("引入"),s("code",[t._v("fetch")]),t._v("的 "),s("code",[t._v("polyfill")]),t._v(": "),s("code",[t._v("fetch-ie8")])]),t._v(" "),s("li",[t._v("可选：如果你还使用了 "),s("code",[t._v("jsonp")]),t._v("，引入 "),s("code",[t._v("fetch-jsonp")])]),t._v(" "),s("li",[t._v("可选：开启 "),s("code",[t._v("Babel")]),t._v(" 的 "),s("code",[t._v("runtime")]),t._v(" 模式，使用 "),s("code",[t._v("async/await")])])]),t._v(" "),s("h2",{attrs:{id:"总结该项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结该项目"}},[t._v("#")]),t._v(" 总结该项目")]),t._v(" "),s("ol",[s("li",[t._v("设计状态时要考虑全面，例如带有网络请求的组件，要考虑请求失败怎么办。")]),t._v(" "),s("li",[t._v("ES6小知识点：解构赋值+重命名"),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("b")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//传统解构赋值")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//连续解构赋值")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("b")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//连续解构赋值+重命名")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])])]),t._v(" "),s("li",[t._v("消息订阅与发布机制\n1.先订阅，再发布（理解：有一种隔空对话的感觉）\n2.适用于任意组件间通信\n3.要在组件的"),s("code",[t._v("componentWillUnmount")]),t._v("中取消订阅")]),t._v(" "),s("li",[s("code",[t._v("fetch")]),t._v("发送请求（关注分离的设计思想）")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("/api1/search/users2?q=")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("keyWord"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'请求出错'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[s("a",{attrs:{href:"https://github.com/Fancy911/React-Learning-Demo-ALL/tree/main/ReactCli-GithubUserSearch",target:"_blank",rel:"noopener noreferrer"}},[t._v("完整项目:react-github-usersearch-demo"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);